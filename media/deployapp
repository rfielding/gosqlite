#!/bin/bash

# Put in a React app
(
  cd `dirname $0`
  ( cd app && tar cvf ../app.tar . ) 
  curl -X POST --data-binary @app.tar http://localhost:9321/files/app/v1?install=true
  #rm app.tar
)

(
  cd `dirname $0`
  curl -X POST --data-binary @gilgamesh.tar http://localhost:9321/files/gilgamesh?install=true
)
(
  cd `dirname $0`
  curl -X POST --data-binary @kjv-bible.tar http://localhost:9321/files/kjv-bible?install=true
)

# Put in a react app
(
  cd `dirname $0`
  if [ -d react-test/build ]
  then
    ( cd react-test/build && tar cvf ../../react-test.tar . ) 
    curl -X POST --data-binary @react-test.tar http://localhost:9321/files/app/react-test?install=true
    rm react-test.tar
  fi
)

# Put in random files
(
  cd `dirname $0`
  for f in *.pdf
  do
    curl -X POST --data-binary @${f} http://localhost:9321/files/documents/${f}
  done
  for f in *.json
  do
    curl -X POST --data-binary @${f} http://localhost:9321/files/documents/${f}
  done
  for f in *.txt
  do
    curl -X POST --data-binary @${f} http://localhost:9321/files/documents/${f}
  done
  for f in *.jpg
  do
    curl -X POST --data-binary @${f} http://localhost:9321/files/documents/${f}
  done
  for f in *.mp4
  do
    curl -X POST --data-binary @${f} http://localhost:9321/files/documents/${f}
  done
  for f in *.png
  do
    curl -X POST --data-binary @${f} http://localhost:9321/files/documents/${f}
  done
)
